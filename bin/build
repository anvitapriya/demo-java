
# brew install maven # for macosx
mvn package # creates target/demo.war
# Move the artifact into pkg so we do not have to send the whole target file
# to the docker build context. We will dockerignore target because it contains
# other build files that bloats the upload context sent to docker.
mkdir -p pkg
mv target/demo.war pkg/demo.war
whoami
sudo usermod -a -G docker jenkins
sudo chmod 777 /var/run/docker.sock
sudo docker images
whoami
sudo docker build -t demo-java .
sudo docker container stop $(docker container ls -aq)
sudo docker container rm $(docker container ls -aq)
sudo docker run -it -p 80:8080 -d demo-java
#sudo docker container ls
echo 'listing of container'
sudo docker container ls -a
dockerRun=sudo docker inspect -f '{{.NetworkSettings.IPAddress}}' $(docker ps -q)
echo '$dockerRun'
curl -s https://$dockerRun:8080/demo/Hello
curl -s https://$dockerRun:8080/demo/index.jsp
# ssh sysadmin@13.71.114.135
echo 'done'




